# Default nixpacks configuration for monorepo
# This can be overridden by service-specific configs in deployment/

[variables]
NODE_ENV = "production"

[phases.setup]
nixPkgs = ["nodejs_22", "npm_9"]

# Default to backend deployment
[phases.install]
cmds = ["cd backend && npm ci --production"]

[start]
cmd = "cd backend && npm start"